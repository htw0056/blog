# shell执行

### shell执行方式有三种：

1. 使文件具有可执行权限，直接运行文件
2. 直接调用命令解释器执行程序
3. 使用source执行文件

## 假设我们有这样一个test.sh脚本

```
#! /bin/bash
cd /tmp
echo "hello world"
```
**注意** `#! /bin/bash`这句必须放在首行


#### 执行方式一

```
pwd
chmod +x test.sh
./test.sh
pwd
```

#### 执行方式二

```
pwd
bash test.sh
pwd
```

#### 执行方式三

```
pwd
source test.sh
pwd
```


### 区别

方式一执行时，实际上是fork了一个进程，然后在子进程中根据`#! /bin/bash`声明的命令来执行接下来的代码，所以查看路径，发现当前的路径不变  

方式二执行时，你直接在外部指定了使用什么命令来执行脚本内的代码，所以首行的`#! /bin/bash`也就失去了意义，写了也没用,而它也是在子进程内执行的,所以查看路径，发现当前的路径不变

方式三执行，就是直接在当前进程内调用当前的shell来执行代码，所以它的执行会影响到shell的环境变量,你当前的路径被修改了



## 现在我们修改test.sh为

```
#! /bin/rm
echo "hello world"
```

依旧执行方式一二三  

方式一，你会发现你的test.sh被删除了

方式二，输出语句hello world

方式三，输出语句hello world

这个例子也就证明了我们刚才对三种方式的解释，方式一根据`#! /bin/rm`来执行，所以删除了文本  
而方式二调用bash执行，所以`#! /bin/rm`无效  
方式三调用了当前的bash，所以`#! /bin/rm`也无效

## 最后我们再次修改test.sh为


```

#! /bin/rm
echo "hello world"
```
**注意**，在第一行加了一个空行

我们继续执行方式一二三  
结果都是输出了hello world，这也就说明`#! /bin/rm`这种声明必须放在首行，否则就失去了作用