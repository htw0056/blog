# 范式（paradigm）

### 1.概念

1. 实体（entity）：就是实际应用中要用数据描述的事物，一般是名词。

2. 字段（fields）：就是一项数据，也就是我们平常所说的“列”。

3. 记录（元组）（record）：一个实体的一个实例所特有的相关数据项的集合，也就是我们平常所说的“行”。

4. 键（key）：可唯一标识一条记录的一个字段或字段集，有时翻译为“码”。

5. 主键（primary key）：用于唯一标识一个表中的一条记录的键。每个主键应该具有下列特征：

 1.  唯一的。
 2. 最小的（尽量选择最少键的组合）。
 3. 非空。
 4. 不可更新的（不能随时更改）

6. 外键（foreign keys）：对连接父表和子表的相关记录的主键字段的复制。

7. 依赖表（dependent table）：也称为弱实体（weak entity）是需要用父表标识的子表。

8. 关联表（associative table）：是多对多关系中两个父表的子表。

9. 实体完整性：每个表必须有一个有效的主键。

10. 参照完整性：没有不相匹配的外键值。


### 2.名词解释

#### 1.函数依赖

> 严格定义：设R(U)是属性集U上的关系模式。X，Y是U的子集。若对于R(U)的任意一个可能的关系r,r中不可能存在两个元组在X上的属性值相等，而在Y上的属性值不相等，则称X函数确定Y或者Y函数依赖于X。记为X->Y。



> 举例：描述一个学生的关系，可以有学号(SNO),姓名(SNAME),系名(SDEPT)等几个属性。由于一个学号只对应一个学生，一个学生只在一个系学习。因此当学号确定之后，姓名和该学生所在系的值也就唯一被确定了，就像自变量x确定之后，相应的函数值f(x)也就唯一地被确定了一样，称SNO函数决定SNAME和SDEPT，或者说SNAME，SDEPT函数依赖于SNO，记为：SNO -> SNAME， SNO -> SDEPT.

#### 2.完全函数依赖

> 严格定义：在R(U)中，如果Y函数依赖于X,并且对于X的任何一个真子集X'，都有Y不函数依赖于X'， 则称Y对X完全函数依赖。否则称Y对X部分函数依赖。  
> 举例：假设一个学生有几个属性  
SNO 学号  
SNAME 姓名  
SDEPT 系  
SAGE 年龄  
CNO 课程号  
G 成绩  
对于(SNO,SNAME,SDEPT,SAGE,CNO,G)来说，G完全依赖于(SNO, CNO), 因为(SNO,CNO)可以决定G，而SNO和CNO都不能单独决定G。  
而SAGE部分函数依赖于(SNO,CNO),因为(SNO,CNO)可以决定SAGE，而单独的SNO也可以决定SAGE。

#### 3.传递函数依赖

> 在R(U)中，如果X->Y, Y->Z, 则称Z对X传递函数依赖。


### 3.范式

#### 1.第一范式

指数据库表的每一列都是不可分割的基本数据项  
在任何一个关系数据库中，第一范式（1NF）是对关系模式的基本要求，不满足第一范式（1NF）的数据库就不是关系数据库。

#### 2.第二范式

数据库表中**不存在非关键字段对任一候选键的部分函数依赖**，也 **即** **所有非关键字段都完全依赖于任意一组候选关键字**。  
2NF的违例只会出现在候选键由超过一个字段构成的表中，因为对单关键字字段不存在部分依赖问题。

> 举例：(学号, 姓名, 年龄, 课程名称, 成绩, 学分)  
候选键只有一个，就是(姓名，课程名称)，则主键就是(姓名，课程名称)  
存在如下决定关系：  
1：(学号, 课程名称) → (姓名, 年龄, 成绩, 学分)  
2：(课程名称) → (学分)  
3：(学号) → (姓名, 年龄)  
其中，姓名、年龄、学分是部分依赖于主键的，而成绩是完全依赖于主键的，存在部分依赖关系，所以不满足第二范式。

#### 3.第三范式

在第二范式的基础上，数据表中如果不存在非关键字段对任一候选关键字段的传递函数依赖则符合第三范式  
出现传递依赖A->B->C，即主键A可以确定出某一非关键字段B，而B又可以确定出C，这意味着C依赖于一个非关键字段B。因此第三范式又可描述为：表中不存在可以确定其他非关键字的非键字段

> 例子：表：(学号, 姓名, 年龄, 所在学院, 学院地点, 学院电话)  
该表中候选字段只有“学号”，于是“学号”做主键。由于主键是单一属性，所以不存在非主属性对主键的部分函数依赖的问题，所以必然满足第二范式。但是存在如下传递依赖  
(学号) → (所在学院) → (学院地点, 学院电话)  
学院地点和学院电话传递依赖于学号，而学院地点和学院电话都是非关键字段，即表中出现了“某一非关键字段可以确定出其它非关键字段”的情况，于是违反了第三范式。  

#### 4.BC范式


BCNF意味着在关系模式中每一个决定因素都包含候选键，也就是说，只要属性或属性组A能够决定任何一个属性B，则A的子集中必须有候选键。BCNF范式排除了任何属性(不光是非主属性，2NF和3NF所限制的都是非主属性)对候选键的传递依赖与部分依赖。  

由BCNF的定义可以得到的结论，一个满足BCNF的关系模式有：  
1. 所有非主属性对每一个码都是完全函数依赖  
2. 所有的主属性对每一个不包含它的码，也是完全函数依赖  
3. 没有任何属性完全函数依赖于非码的任何一组属性  