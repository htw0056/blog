# 4G transform 2G

> 为什么我们用中国移动打电话的时候，4G信息号会切回到2G?



#### 1. 基础背景

我们平时说的WCDMA、TD-SCDMA、TD-LTE其实通常指**空口技术**，即**从手机到基站**的通信技术。而**移动通信的核心控制部分**，则由**核心网**完成——如何在两个基站间建立起语音连接？何时给拨号方返回嘟嘟的线音？何时给接收方发出振铃？如何判断一个用户是否开通了呼叫转移业务，如何实现？如何建立从手机到因特网服务器的数据连接？如何判断用户是3G用户还是LTE用户？ *这些都是由移动核心网完成的。*

下面来说**移动核心网的种类**。在2G/3G时代，移动核心网是两个独立的域，控制语音相关的叫**电路域**（CS域：Circuit Switch），控制数据业务相关的叫**分组域**（PS域：Packet Switch）。相应的，与语音相关的控制都放在了电路域，比如上面的语音呼叫建立、返回振铃、判断并执行呼叫转移，以及曾经的杀手锏业务短信等等。与数据相关的控制则放在了分组域，比如上面的与因特网服务器（通信网与因特网是两张网）建立数据连接、区分你当前流量是微信还是微博等等。

因此，**在2G/3G时代，语音和数据业务分别承载在两张不同的核心网上**。3G网络允许业务并发，也即同时使用两张网络，在打电话的同时可以数据下载。（2G，严格的说是2.5G的GPRS，由于技术限制，通常发生呼叫的时候数据业务会挂起）随着数据业务的爆发以及网络的全IP化，**LTE网络不再提供电路域，只保留唯一的一个分组域核心网**（EPC：Evolved Packet Core）。LTE的最终目标是所有业务，包括语音、数据，都承载在这张用来处理数据业务的核心网上。也就说，**只有在语音完全实现数据化（IP化）后，LTE网络才能够承载语音业务，而这个条件目前在中国并不具备。**

可能有人会问，手机QQ既然能语音通话，为什么LTE网络不能直接也这么干？因为这种类似于软件中的语音通话功能只是应用级别的，运营商无法做到对通话过程完全可控（使用手机号MSISDN作为身份标识、区域计费、增值业务等），更重要的是，这种级别的语音业务无法保障其通话质量（想象一边QQ语音一边下迅雷吧）。此外，实现移动电话与固网（座机）之间的通信也是个很重要的问题。

为此，通信人们又构想出了**IP多媒体系统**（**IMS**: IP Multimedia Subsystem），叠加在LTE核心网上，通过IP网络提供高质量、可控、可与固网融合的语音业务（当然不只是语音业务，还包括视频等媒体业务）。而**VoLTE技术（Voice over LTE）就是基于IMS的，也是在LTE网络中承载语音通话的唯一方式。**

不幸的是，多年来IMS的研究进展缓慢，其大规模的商用也刚刚开始（韩国SK已部署商用VoLTE），而**要在中国这么大的范围内实现VoLTE，目前来看还不太成熟，需要后续持续的大规模网络基础建设**（都是钱哪……），因此可以说，从目前来讲，「4G LTE 网只能提供数据服务，不能承载语音通话。」。



#### 2. 过渡期临时方案

既然目前IMS网络大规模部署还不成熟，自然就有人想出了**过渡期间的临时方案：CSFB和多模双待**。

**语音业务回落**（CSFB: CS Fallback）是指驻留在LTE网络中的用户，需要发起语音业务时（包括主叫和被叫，不包括短信），通过切换，**完全回落至2G/3G网络**，然后**通过2G/3G网络中的电路域进行语音业务**，通过2G/3G网络中的分组域接续之前在LTE网络中未完成的数据业务，但是数据业务的速率会显著降低。**语音业务完成后再返回LTE网络**（至于是否挂机就马上回去就不一定了）。这是**世界上绝大多数运营商采取的过渡期方案。**这种方案的问题在于，如果优化不好，回落的过程耗时会很长，导致语音建立的时间较长。（当然小伙伴们不用担心，已经有一群人集中脑力把它优化的很好了。）

**多模双待**的概念就很好理解了，跟现在常说的双模双待机原理是类似的，唯一不同就是只需要一张SIM卡。**用户同时驻留在2G/3G和LTE网络，语音业务通过2G/3G提供，数据通过LTE网络来承载**。享受2G/3G的语音质量和LTE的数据速率，听着很完美是不是？致命弱点：**耗电量大**，这个不用多说吧，智能机用户的切肤之痛，试想如果本来就只能用6个小时的安卓机使用多模双待只能用4个小时了（可能有些夸张，具体数据未知），小伙伴们能忍么？第二，**支持多模双待的终端少而且成本更高**，大名鼎鼎的iPhone 5S就不支持，这也是为什么5S，以及其他非移动定制机，开通4G后被爆出各种语音、短信问题。

#### 3. 中国自身的问题

既然多模双待问题挺多，而CSFB听起来还不错，为什么中国移动、中国电信不好决定？

中国移动的原因，自然是其3G网络：TD-SCDMA的短板，导致其回落到3G网络的策略基本不可用。那回落到2G呢？要知道，**GSM可是十多年前的技术**了，技术上很难再做出更多的优化，导致CSFB的缺点被放大：回落时间过长（上文中「优化的很好」特指LTE到3G网络的回落）。试想用户需要打一个电话，先需要若干秒（假设8s吧）的回落时间（从LTE到2G），然后再经过若干秒（假设4s吧）的呼叫建立时间（2G系统内部），那每拨打一个电话，单方就至少需要等待12s，双方都是LTE用户的话还要更长（不是x2的关系，小于）。这恐怕谁都不好拍板就让用户这么等着。此外，**2G（GPRS/EDGE都属于2G）的数据业务速率极差**。GPRS的理论最高速率为171.2kbps，实际大概在40kbps左右；EDGE的理论峰值可以达到384kbit/s，实际大概是160Kbps左右；而LTE理论上可是100Mbps，也就是100,000kbps，从光纤网络直接掉到拨号网络，用户能满意么？（以上速率除以8就是你迅雷上看到的下载速度）

好在中国移动坐拥数亿用户，拥有强大的产业推进能力，只要想，马上就会有无数移动版手机支持多模双待，所以也不用太操心。而移动的资金雄厚，大踏步建网直接进入VoLTE时代也应该指日可待。

而中国电信的原因，则在于从其3G网络**CDMA2000到LTE的演进不是平滑**的，可以理解为两张技术上截然不同的网络，回落自然也成问题。况且国外大部分部署CDMA的运营商（主要集中在北美）当初大部分都选了多模双待（当时回落技术还非常不成熟），所以选择跟风自然最稳妥。

中国联通所谓拿到最好的3G牌照绝对名不虚传，所以采用CSFB没有什么悬念。而其3G网络从WCDMA升级到到HSPA+其理论峰值就可以达到42Mbps，跟LTE已经不分伯仲，也导致其LTE的发展态度最保守。不过，其从WCDMA到LTE的演进从技术上讲也是三家运营商里最平滑的，偷着乐吧。